<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    
    <title>FLX Calc - Protocolo de Elite</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563EB">
    <meta name="description" content="Calculadora de Carga e Aquecimento para Powerlifting e Musculação">
    <link rel="apple-touch-icon" href="icon-192.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js e Plugin de DataLabels -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        font-family: 'Outfit', sans-serif;
      }
      /* Remove setas do input number */
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type='number'] {
        -moz-appearance: textfield;
      }
    </style>
  </head>
  <body class="bg-white text-black">
    <div id="root"></div>

    <script type="text/babel">
      // Registrar o plugin do Chart.js
      Chart.register(ChartDataLabels);

      // --- ÍCONES ---
      const Dumbbell = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <path d='m6.5 6.5 11 11' />
          <path d='m21 21-1-1' />
          <path d='m3 3 1 1' />
          <path d='m18 22 4-4' />
          <path d='m2 6 4-4' />
          <path d='m3 10 7-7' />
          <path d='m14 21 7-7' />
        </svg>
      );
      const Check = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <polyline points='20 6 9 17 4 12' />
        </svg>
      );
      const Hash = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <line x1='4' x2='20' y1='9' y2='9' />
          <line x1='4' x2='20' y1='15' y2='15' />
          <line x1='10' x2='8' y1='3' y2='21' />
          <line x1='16' x2='14' y1='3' y2='21' />
        </svg>
      );
      const ArrowRight = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <path d='M5 12h14' />
          <path d='m12 5 7 7-7 7' />
        </svg>
      );
      const AlertCircle = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <circle cx='12' cy='12' r='10' />
          <line x1='12' x2='12' y1='8' y2='12' />
          <line x1='12' x2='12.01' y1='16' y2='16' />
        </svg>
      );
      const ChevronDown = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <path d='m6 9 6 6 6-6' />
        </svg>
      );
      const Layers = ({ className, size = 24 }) => (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={size}
          height={size}
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          strokeWidth='2'
          strokeLinecap='round'
          strokeLinejoin='round'
          className={className}
        >
          <polygon points='12 2 2 7 12 12 22 7 12 2' />
          <polyline points='2 17 12 22 22 17' />
          <polyline points='2 12 12 17 22 12' />
        </svg>
      );

      // --- COMPONENTE DO GRÁFICO ---
      const WarmupChart = ({ sets, workLoad }) => {
        const chartRef = React.useRef(null);
        const chartInstance = React.useRef(null);

        React.useEffect(() => {
          if (!chartRef.current || sets.length === 0) return;

          const ctx = chartRef.current.getContext('2d');

          if (chartInstance.current) {
            chartInstance.current.destroy();
          }

          // Adicionar o Work Set aos dados do gráfico
          const chartDataSets = [
            ...sets,
            { weight: parseFloat(workLoad), percent: 100, isWorkSet: true }
          ];

          const labels = chartDataSets.map((_, i) => i === chartDataSets.length - 1 ? 'Work' : `Série ${i + 1}`);
          const data = chartDataSets.map((s) => s.weight);
          const percentages = chartDataSets.map((s) => s.percent + '%');

          // Calcular Min e Max para "agarrar" o gráfico nas bordas verticais
          const minWeight = Math.min(...data);
          const maxWeight = Math.max(...data);

          // Plugin Customizado para linha vertical de bolinhas
          const customDrawPlugin = {
            id: 'customDrawPlugin',
            afterDatasetsDraw: (chart) => {
              const { ctx, chartArea: { top, bottom }, scales: { x, y } } = chart;
              
              chart.data.datasets.forEach((dataset, i) => {
                 const meta = chart.getDatasetMeta(i);
                 meta.data.forEach((point, index) => {
                   // 1. Linha Vertical de Bolinhas
                   ctx.save();
                   ctx.beginPath();
                   ctx.strokeStyle = '#CBD5E1'; // Cinza (Slate-300)
                   ctx.lineWidth = 2;
                   ctx.setLineDash([0, 5]); // Efeito de bolinha (traço zero, espaço 5)
                   ctx.lineCap = 'round';   // Ponta redonda
                   ctx.moveTo(point.x, bottom);
                   ctx.lineTo(point.x, point.y);
                   ctx.stroke();
                   ctx.restore();
                 });
              });
            }
          };

          chartInstance.current = new Chart(ctx, {
            type: 'line',
            data: {
              labels: labels,
              datasets: [
                {
                  label: 'Peso',
                  data: data,
                  borderColor: '#2563EB',
                  borderWidth: 1,
                  backgroundColor: (context) => {
                    const ctx = context.chart.ctx;
                    const gradient = ctx.createLinearGradient(0, 0, 0, 250);
                    gradient.addColorStop(0, 'rgba(37, 99, 235, 0.3)'); // Topo 30%
                    gradient.addColorStop(1, 'rgba(37, 99, 235, 0.0)');  // Base Transparente
                    return gradient;
                  },
                  pointBackgroundColor: '#ffffff',
                  pointBorderColor: '#2563EB',
                  pointBorderWidth: 2,
                  pointRadius: (ctx) => {
                    const index = ctx.dataIndex;
                    const count = ctx.dataset.data.length;
                    return (index === 0 || index === count - 1) ? 4 : 2;
                  },
                  pointHoverRadius: 6,
                  tension: 0.1,
                  fill: true,
                  clip: false, // <--- CRUCIAL: Impede que bolinhas nas bordas sejam cortadas
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              layout: {
                padding: {
                  top: 40, // Aumentado um pouco para garantir espaço para a etiqueta preta
                  right: 30, 
                  left: 30,  
                  bottom: 15
                }
              },
              plugins: {
                legend: {
                  display: false,
                },
                tooltip: {
                  backgroundColor: '#1F2937',
                  padding: 10,
                  titleFont: { family: 'Outfit', size: 12 },
                  bodyFont: { family: 'Outfit', size: 12, weight: 'bold' },
                  callbacks: {
                    label: (context) => `${context.raw}kg`,
                  },
                },
                datalabels: {
                  align: 'top',
                  anchor: 'end',
                  offset: 4,
                  // Fundo: Preto para o último, transparente para os outros
                  backgroundColor: (context) => {
                    return context.dataIndex === context.dataset.data.length - 1 ? '#000000' : 'transparent';
                  },
                  // Borda: Preta para o último, cinza para os outros
                  borderColor: (context) => {
                    return context.dataIndex === context.dataset.data.length - 1 ? '#000000' : '#E5E7EB';
                  },
                  borderWidth: 1,
                  borderRadius: 4,
                  padding: { 
                    top: 2,
                    bottom: 2,
                    left: 4,
                    right: 4
                  },
                  // Cor do Texto: Branco para o último, cinza para os outros
                  color: (context) => {
                    return context.dataIndex === context.dataset.data.length - 1 ? '#FFFFFF' : '#6B7280';
                  },
                  font: {
                    family: 'Outfit',
                    weight: 'bold',
                    size: 9 
                  },
                  formatter: (value, context) => {
                    return percentages[context.dataIndex];
                  }
                }
              },
              scales: {
                y: {
                  beginAtZero: false,
                  // FIXAR ESCALA PARA AGARRAR PONTOS
                  min: minWeight,
                  max: maxWeight,
                  grid: {
                    display: true,
                    color: '#F3F4F6',
                    borderDash: [5, 5],
                    drawBorder: false,
                  },
                  ticks: { display: false },
                  border: { display: false }
                },
                x: {
                  grid: { display: false, drawBorder: false },
                  ticks: { display: false },
                  border: { display: false }
                },
              },
            },
            plugins: [customDrawPlugin]
          });

          return () => {
            if (chartInstance.current) {
              chartInstance.current.destroy();
            }
          };
        }, [sets, workLoad]);

        if (sets.length === 0) return null;

        // Aumentado de h-44 para h-48 (~10% maior)
        return (
          <div className="w-full h-48 bg-white rounded-xl border border-gray-100 shadow-sm p-4 mb-6 relative">
             <div className="absolute top-4 left-4 z-10">
                <p className="text-xs font-bold text-gray-400 uppercase tracking-widest">Progressão de Carga</p>
             </div>
            <canvas ref={chartRef}></canvas>
          </div>
        );
      };

      // --- APLICATIVO ---
      const FLXCalc = () => {
        const [workLoad, setWorkLoad] = React.useState('');
        const [sets, setSets] = React.useState([]);
        const [completed, setCompleted] = React.useState([]);
        const [exercise, setExercise] = React.useState('agachamento');
        const [backoffSets, setBackoffSets] = React.useState(null);

        const allExercises = [
          { id: 'agachamento', label: 'Agachamento' },
          { id: 'supino', label: 'Supino' },
          { id: 'terra', label: 'Levantamento Terra' },
          { id: 'desenvolvimento', label: 'Desenvolvimento' },
          { id: 'remada', label: 'Remada' },
        ];

        const roundToTen = (val) => Math.round(val / 10) * 10;
        const roundToFive = (val) => Math.round(val / 5) * 5;

        // --- LÓGICA DE CÁLCULO MANTIDA ---
        const calculateWarmup = (targetWeight) => {
          if (!targetWeight || targetWeight < 20) return [];

          const startWeight = targetWeight < 70 ? 20 : 30;

          if (targetWeight <= startWeight) {
             return [{
                weight: startWeight,
                reps: 15,
                percent: Math.round((startWeight / targetWeight) * 100)
             }];
          }

          let lastWarmup = roundToTen(targetWeight - 20);
          if ((targetWeight - lastWarmup) > 20) {
            lastWarmup = roundToTen(targetWeight - 10);
          }
          if (lastWarmup >= targetWeight) lastWarmup = targetWeight - 10;
          
          if (lastWarmup <= startWeight) {
             return [{
                weight: startWeight,
                reps: 15,
                percent: Math.round((startWeight / targetWeight) * 100)
             }];
          }

          const minSteps = targetWeight > 70 ? 3 : 1; 

          let finalGap = targetWeight - lastWarmup;
          let range = lastWarmup - startWeight;
          
          let steps = Math.max(minSteps, Math.ceil(range / 40));
          let currentJump = range / steps;

          while (currentJump < finalGap && steps > 0) {
             let newLast = lastWarmup + 10;
             if (newLast >= targetWeight) break;

             lastWarmup = newLast;
             finalGap = targetWeight - lastWarmup;
             range = lastWarmup - startWeight;
             
             steps = Math.max(minSteps, Math.ceil(range / 40));
             currentJump = range / steps;
          }

          let warmupWeights = [];
          warmupWeights.push(startWeight);

          if (steps > 0) {
             const stepSize = range / steps;
             for (let i = 1; i <= steps; i++) {
                let val = startWeight + (stepSize * i);
                let rounded = roundToTen(val);
                
                if (i === steps) rounded = lastWarmup;

                if (targetWeight > 70 && rounded <= warmupWeights[warmupWeights.length - 1]) {
                    let fineRounded = roundToFive(val);
                    if (fineRounded > warmupWeights[warmupWeights.length - 1]) {
                        rounded = fineRounded;
                    } else {
                        if (i < steps) {
                           rounded = warmupWeights[warmupWeights.length - 1] + 5;
                           if (rounded > lastWarmup) rounded = lastWarmup; 
                        }
                    }
                } else if (rounded <= warmupWeights[warmupWeights.length - 1]) {
                    continue;
                }

                warmupWeights.push(rounded);
             }
          }
          
          if (targetWeight > 70 && warmupWeights.length < 4) {
              warmupWeights = [startWeight];
              let needed = 3;
              let localStep = (lastWarmup - startWeight) / needed;
              for(let k=1; k<=needed; k++) {
                  warmupWeights.push(Math.round((startWeight + localStep * k)/2.5)*2.5);
              }
              warmupWeights[warmupWeights.length-1] = lastWarmup;
          }

          return warmupWeights.map((w, i) => {
             let reps = 1;
             const setNum = i + 1;
             
             if (setNum === 1) reps = 15;
             else if (setNum === 2) reps = 5;
             else if (setNum === 3) reps = 3;
             else if (setNum === 4) reps = 2;
             else reps = 1;

             return {
                weight: w,
                reps: reps,
                percent: Math.round((w / targetWeight) * 100)
             };
          });
        };

        React.useEffect(() => {
          if (workLoad && parseFloat(workLoad) > 0) {
            const calculated = calculateWarmup(parseFloat(workLoad));
            setSets(calculated);

            // Lógica Padrão de Elite (Pesado)
            if (exercise === 'terra') {
              const backoffWeight = roundToTen(parseFloat(workLoad) * 0.8);
              setBackoffSets({ weight: backoffWeight, sets: 2, reps: 5 });
            } else {
              setBackoffSets(null);
            }
          } else {
            setSets([]);
            setBackoffSets(null);
          }
        }, [workLoad, exercise]);

        const toggleSet = (index) => {
          if (completed.includes(index)) {
            setCompleted(completed.filter((i) => i !== index));
          } else {
            setCompleted([...completed, index]);
          }
        };

        const themeColor = {
          text: 'text-blue-600',
          bg: 'bg-blue-600',
          bgLight: 'bg-blue-50',
          border: 'border-blue-600',
          borderLight: 'border-blue-100',
          shadow: 'shadow-blue-200',
          ring: 'ring-blue-50',
          selectionBg: 'selection:bg-blue-100',
          selectionText: 'selection:text-blue-900',
          subText: 'text-blue-400',
        };

        return (
          <div
            className={`min-h-screen bg-white text-black font-sans pb-20 ${themeColor.selectionBg} ${themeColor.selectionText}`}
          >
            <div className='max-w-xl mx-auto px-6 py-8'>
              {/* Header */}
              <header className='mb-8 flex items-center justify-between'>
                <div>
                  <h1
                    className={`text-4xl font-black tracking-tighter mb-0 ${themeColor.text}`}
                  >
                    FLX Calc
                  </h1>
                  <p className='text-black text-sm font-bold tracking-widest'>
                    Protocolo de Elite
                  </p>
                </div>
                <div className={`${themeColor.bg} text-white p-2 rounded-lg`}>
                  <Dumbbell className='w-6 h-6' strokeWidth={2} />
                </div>
              </header>

              {/* Seletor de Exercício (Simplificado - Todos são "Pesados") */}
              <div className='mb-8'>
                <label className='block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2'>
                  Exercício
                </label>
                <div className='grid grid-cols-1 relative'>
                  <select
                    value={exercise}
                    onChange={(e) => setExercise(e.target.value)}
                    className={`appearance-none w-full bg-gray-50 border-2 border-gray-200 text-xl font-bold p-4 rounded-xl focus:outline-none focus:${themeColor.border} transition-colors cursor-pointer text-black`}
                  >
                    {allExercises.map((ex) => (
                      <option key={ex.id} value={ex.id}>
                        {ex.label}
                      </option>
                    ))}
                  </select>
                  <ChevronDown className='absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none' />
                </div>
              </div>

              {/* Input Carga */}
              <div className='mb-10'>
                <label className='block text-xs font-bold uppercase tracking-widest text-gray-400 mb-3'>
                  Carga de Trabalho (Work Set)
                </label>
                <div className='relative group'>
                  <input
                    type='number'
                    value={workLoad}
                    onChange={(e) => setWorkLoad(e.target.value)}
                    placeholder='0'
                    className='w-full text-7xl font-black border-b-4 border-gray-200 py-4 focus:outline-none focus:border-black transition-colors bg-transparent placeholder-gray-200'
                    step='any'
                  />
                  <span className='absolute right-0 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-400 group-focus-within:text-black transition-colors'>
                    KG
                  </span>
                </div>

                {workLoad &&
                  parseFloat(workLoad) < 70 &&
                  parseFloat(workLoad) > 0 && (
                    <div
                      className={`flex items-center gap-2 mt-2 ${themeColor.text} text-xs font-medium ${themeColor.bgLight} p-2 rounded-lg`}
                    >
                      <AlertCircle size={14} />
                      <span>
                        Carga menor que 70kg: Início ajustado para 20kg.
                      </span>
                    </div>
                  )}
              </div>

              {/* Gráfico de Aquecimento */}
              {sets.length > 0 && <WarmupChart sets={sets} workLoad={workLoad} />}

              {/* Lista Aquecimento */}
              <div className='space-y-3 relative'>
                {sets.length > 0 && (
                  <div className='flex items-center gap-2 mb-4'>
                    <span className='bg-black text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider'>
                      Aquecimento
                    </span>
                    <div className='h-px bg-gray-200 flex-grow'></div>
                  </div>
                )}

                {sets.length > 0 && (
                  <div className='absolute left-[26px] top-10 bottom-10 w-0.5 bg-gray-100 -z-10'></div>
                )}

                {sets.map((set, index) => {
                  const isDone = completed.includes(index);
                  const isNext =
                    !isDone && (index === 0 || completed.includes(index - 1));
                  const prevWeight = index === 0 ? 0 : sets[index - 1].weight;
                  const jump = index === 0 ? 0 : set.weight - prevWeight;

                  return (
                    <div
                      key={index}
                      onClick={() => toggleSet(index)}
                      className={`
                                                        relative flex items-center gap-6 p-4 rounded-xl cursor-pointer transition-all duration-300 group select-none
                                                        ${
                                                          isDone
                                                            ? 'opacity-30 grayscale blur-[0.5px]'
                                                            : 'opacity-100'
                                                        }
                                                        ${
                                                          isNext
                                                            ? `bg-black text-white shadow-xl scale-[1.02] translate-x-1 ring-4 ${themeColor.ring}`
                                                            : 'bg-white border border-gray-100 hover:border-gray-300'
                                                        }
                                                      `}
                    >
                      <div
                        className={`
                                                                    flex-shrink-0 w-14 h-14 rounded-full border-2 flex items-center justify-center transition-all
                                                                    ${
                                                                      isDone
                                                                        ? 'bg-black border-black'
                                                                        : isNext
                                                                        ? 'bg-white border-transparent text-black'
                                                                        : 'bg-gray-100 border-transparent text-gray-300 group-hover:border-gray-400'
                                                                    }
                                                                  `}
                      >
                        {isDone ? (
                          <Check size={24} className='text-white' />
                        ) : (
                          <span className='text-lg font-bold'>{index + 1}</span>
                        )}
                      </div>

                      <div className='flex-grow flex flex-col justify-center'>
                        <div className='flex items-baseline gap-2'>
                          <span className='text-4xl font-black tracking-tight leading-none'>
                            {set.weight}
                          </span>
                          <span
                            className={`text-xs font-bold uppercase tracking-wider ${
                              isNext ? 'text-gray-400' : 'text-gray-400'
                            }`}
                          >
                            kg
                          </span>
                        </div>

                        <div className='flex items-center gap-3 mt-1'>
                          {index > 0 && (
                            <span
                              className={`text-[10px] font-bold flex items-center gap-1 px-1.5 py-0.5 rounded ${
                                isNext
                                  ? 'bg-white/20 text-gray-200'
                                  : 'bg-gray-100 text-gray-500'
                              }`}
                            >
                              <ArrowRight size={10} /> +{jump}kg
                            </span>
                          )}
                          <span
                            className={`text-[10px] font-bold ${
                              isNext ? 'text-gray-500' : 'text-gray-400'
                            }`}
                          >
                            {set.percent}%
                          </span>
                        </div>
                      </div>

                      <div className='text-right min-w-[60px]'>
                        <div
                          className={`text-4xl font-black leading-none ${
                            isNext ? 'text-white' : 'text-black'
                          }`}
                        >
                          {set.reps}
                        </div>
                        <div
                          className={`text-[9px] uppercase font-bold tracking-widest mt-1 ${
                            isNext ? 'text-gray-400' : 'text-gray-400'
                          }`}
                        >
                          Reps
                        </div>
                      </div>
                    </div>
                  );
                })}

                {/* Work Set Card */}
                {workLoad && sets.length > 0 && (
                  <div className='pt-8'>
                    <div className='flex items-center gap-2 mb-4'>
                      <span
                        className={`${themeColor.bg} text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider`}
                      >
                        Work Set
                      </span>
                      <div className='h-px bg-blue-100 flex-grow'></div>
                    </div>

                    <div
                      className={`flex items-center gap-6 p-6 rounded-2xl border-2 ${themeColor.border} ${themeColor.bgLight} shadow-sm relative overflow-hidden`}
                    >
                      <div
                        className={`absolute top-0 right-0 p-4 opacity-10 ${themeColor.text}`}
                      >
                        <Hash size={120} />
                      </div>

                      <div
                        className={`w-14 h-14 ${themeColor.bg} rounded-full flex items-center justify-center text-white shrink-0 z-10 shadow-lg ${themeColor.shadow}`}
                      >
                        <Dumbbell size={24} />
                      </div>
                      <div className='z-10'>
                        <div
                          className={`text-xs font-bold uppercase tracking-widest ${themeColor.subText} mb-1`}
                        >
                          {exercise === 'terra'
                            ? '1 Série Pesada'
                            : '5 Séries de Trabalho'}
                        </div>
                        <div className='flex items-baseline gap-2'>
                          <span className='text-5xl font-black text-black tracking-tighter'>
                            {workLoad}
                          </span>
                          <span className='text-xl text-gray-400 font-bold'>
                            KG
                          </span>
                        </div>
                        <div
                          className={`mt-2 inline-flex bg-white px-3 py-1 rounded-full text-xs font-bold ${themeColor.text} shadow-sm border ${themeColor.borderLight}`}
                        >
                          {exercise === 'terra'
                            ? '1 x 5 Reps'
                            : '5 x 5 Reps'}
                        </div>
                      </div>
                    </div>

                    {/* Backoff */}
                    {backoffSets && (
                      <div className='mt-4'>
                        <div className='flex items-center gap-4 p-5 rounded-xl border-l-4 border-gray-300 bg-gray-50'>
                          <div className='p-2 bg-white rounded-lg shadow-sm'>
                            <Layers size={20} className='text-gray-400' />
                          </div>
                          <div>
                            <div className='text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-0.5'>
                              Backoff Sets (80%)
                            </div>
                            <div className='flex items-baseline gap-2'>
                              <span className='text-2xl font-black text-gray-700'>
                                {backoffSets.weight}kg
                              </span>
                              <span className='text-sm font-medium text-gray-400'>
                                x 5 reps
                              </span>
                            </div>
                            <div className='text-xs font-bold text-gray-500 mt-1'>
                              Realizar {backoffSets.sets} séries
                            </div>
                          </div>
                        </div>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<FLXCalc />);
    </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW registrado com sucesso:', reg.scope))
                    .catch(err => console.error('Erro ao registrar SW:', err));
            });
        }
    </script>
  </body>
</html>
